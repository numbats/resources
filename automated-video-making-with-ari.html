<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Automated video making with ari | Resources for learning R</title>
  <meta name="description" content="R Resources" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Automated video making with ari | Resources for learning R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="R Resources" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Automated video making with ari | Resources for learning R" />
  
  <meta name="twitter:description" content="R Resources" />
  

<meta name="author" content="Nicholas Tierney" />


<meta name="date" content="2023-04-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="spatial-data.html"/>
<link rel="next" href="using-.rprofile-and-.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Resources</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="installing-r.html"><a href="installing-r.html"><i class="fa fa-check"></i><b>1</b> Installing R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r.html"><a href="installing-r.html#using-rstudio-projects"><i class="fa fa-check"></i><b>1.1</b> Using RStudio projects</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>2</b> Troubleshooting</a>
<ul>
<li class="chapter" data-level="2.1" data-path="troubleshooting.html"><a href="troubleshooting.html#theres-a-problem-with-my-r-code"><i class="fa fa-check"></i><b>2.1</b> There’s a problem with my R code</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="troubleshooting.html"><a href="troubleshooting.html#phase-1-typos-spelling"><i class="fa fa-check"></i><b>2.1.1</b> Phase 1: Typos + Spelling</a></li>
<li class="chapter" data-level="2.1.2" data-path="troubleshooting.html"><a href="troubleshooting.html#phase-two-google-is-your-friend-and-so-is-r"><i class="fa fa-check"></i><b>2.1.2</b> Phase Two: Google is your friend and so is R</a></li>
<li class="chapter" data-level="2.1.3" data-path="troubleshooting.html"><a href="troubleshooting.html#phase-three-ask-google-again"><i class="fa fa-check"></i><b>2.1.3</b> Phase Three: Ask google again</a></li>
<li class="chapter" data-level="2.1.4" data-path="troubleshooting.html"><a href="troubleshooting.html#phase-four-rubber-duck"><i class="fa fa-check"></i><b>2.1.4</b> Phase Four: Rubber Duck</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="troubleshooting.html"><a href="troubleshooting.html#asking-for-help"><i class="fa fa-check"></i><b>2.2</b> Asking for help</a></li>
<li class="chapter" data-level="2.3" data-path="troubleshooting.html"><a href="troubleshooting.html#package-install-library-errors"><i class="fa fa-check"></i><b>2.3</b> Package install / library errors</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="reporting-problems-with-your-code.html"><a href="reporting-problems-with-your-code.html"><i class="fa fa-check"></i><b>3</b> Reporting problems with your code</a>
<ul>
<li class="chapter" data-level="3.1" data-path="reporting-problems-with-your-code.html"><a href="reporting-problems-with-your-code.html#some-approaches-to-avoid"><i class="fa fa-check"></i><b>3.1</b> Some approaches to avoid</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>4</b> Rmarkdown</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#what-is-rmarkdown"><i class="fa fa-check"></i><b>4.1</b> What is Rmarkdown?</a></li>
<li class="chapter" data-level="4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown"><i class="fa fa-check"></i><b>4.2</b> Markdown</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#a-brief-example-of-markdown"><i class="fa fa-check"></i><b>4.2.1</b> A brief example of markdown</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#where-to-learn-about-rmarkdown"><i class="fa fa-check"></i><b>4.3</b> Where to learn about Rmarkdown</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="debugging-in-r.html"><a href="debugging-in-r.html"><i class="fa fa-check"></i><b>5</b> Debugging in R</a></li>
<li class="chapter" data-level="6" data-path="git-and-version-control.html"><a href="git-and-version-control.html"><i class="fa fa-check"></i><b>6</b> git and version control</a></li>
<li class="chapter" data-level="7" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>7</b> shiny</a>
<ul>
<li class="chapter" data-level="7.1" data-path="shiny.html"><a href="shiny.html#introductory"><i class="fa fa-check"></i><b>7.1</b> Introductory</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="visualisation.html"><a href="visualisation.html"><i class="fa fa-check"></i><b>8</b> Visualisation</a>
<ul>
<li class="chapter" data-level="8.1" data-path="visualisation.html"><a href="visualisation.html#ggplot2"><i class="fa fa-check"></i><b>8.1</b> ggplot2</a></li>
<li class="chapter" data-level="8.2" data-path="visualisation.html"><a href="visualisation.html#plotly"><i class="fa fa-check"></i><b>8.2</b> plotly</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="spatial-data.html"><a href="spatial-data.html"><i class="fa fa-check"></i><b>9</b> Spatial data</a></li>
<li class="chapter" data-level="10" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html"><i class="fa fa-check"></i><b>10</b> Automated video making with ari</a>
<ul>
<li class="chapter" data-level="10.1" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#getting-setup-with-ari"><i class="fa fa-check"></i><b>10.1</b> Getting setup with ari</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#provide-an-html-slide-deck"><i class="fa fa-check"></i><b>10.1.1</b> Provide an HTML slide deck</a></li>
<li class="chapter" data-level="10.1.2" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#provide-some-set-of-subtitlesscript-for-each-slide"><i class="fa fa-check"></i><b>10.1.2</b> Provide some set of subtitles/script for each slide</a></li>
<li class="chapter" data-level="10.1.3" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#set-up-an-account-with-amazon-web-services-for-aws-polly"><i class="fa fa-check"></i><b>10.1.3</b> Set up an account with Amazon Web Services for AWS Polly</a></li>
<li class="chapter" data-level="10.1.4" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#share-your-api-key-with-polly"><i class="fa fa-check"></i><b>10.1.4</b> Share your API key with polly</a></li>
<li class="chapter" data-level="10.1.5" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#have-ffmpeg-installed"><i class="fa fa-check"></i><b>10.1.5</b> Have ffmpeg installed</a></li>
<li class="chapter" data-level="10.1.6" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#narrate-the-video"><i class="fa fa-check"></i><b>10.1.6</b> Narrate the video</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#helper-function-for-ari"><i class="fa fa-check"></i><b>10.2</b> Helper function for <code>ari</code></a></li>
<li class="chapter" data-level="10.3" data-path="automated-video-making-with-ari.html"><a href="automated-video-making-with-ari.html#troubleshooting-ari"><i class="fa fa-check"></i><b>10.3</b> Troubleshooting <code>ari</code></a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="using-.rprofile-and-.html"><a href="using-.rprofile-and-.html"><i class="fa fa-check"></i><b>11</b> Using .Rprofile and .Renviron</a>
<ul>
<li class="chapter" data-level="11.1" data-path="using-.rprofile-and-.html"><a href="using-.rprofile-and-.html#rprofile"><i class="fa fa-check"></i><b>11.1</b> .Rprofile</a></li>
<li class="chapter" data-level="11.2" data-path="using-.rprofile-and-.html"><a href="using-.rprofile-and-.html#renviron"><i class="fa fa-check"></i><b>11.2</b> .Renviron</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="using-.rprofile-and-.html"><a href="using-.rprofile-and-.html#how-do-i-use-it"><i class="fa fa-check"></i><b>11.2.1</b> How do I use it?</a></li>
<li class="chapter" data-level="11.2.2" data-path="using-.rprofile-and-.html"><a href="using-.rprofile-and-.html#some-other-use-cases-of-.renviron"><i class="fa fa-check"></i><b>11.2.2</b> Some other use cases of <code>.Renviron</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="using-.rprofile-and-.html"><a href="using-.rprofile-and-.html#a-cautionary-note-on-sharing-keys.-1"><i class="fa fa-check"></i><b>11.2.3</b> A cautionary note on sharing keys.</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="using-.rprofile-and-.html"><a href="using-.rprofile-and-.html#learning-more"><i class="fa fa-check"></i><b>11.3</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html"><i class="fa fa-check"></i><b>12</b> Vectors and Lists</a>
<ul>
<li class="chapter" data-level="12.1" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html#vectors"><i class="fa fa-check"></i><b>12.1</b> Vectors</a></li>
<li class="chapter" data-level="12.2" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html#lists"><i class="fa fa-check"></i><b>12.2</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="dataframe-vs-a-tibble.html"><a href="dataframe-vs-a-tibble.html"><i class="fa fa-check"></i><b>13</b> Dataframe vs a tibble</a></li>
<li class="chapter" data-level="14" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>14</b> Functions</a></li>
<li class="chapter" data-level="15" data-path="tidying-data.html"><a href="tidying-data.html"><i class="fa fa-check"></i><b>15</b> Tidying data</a></li>
<li class="chapter" data-level="16" data-path="slides-and-presentations.html"><a href="slides-and-presentations.html"><i class="fa fa-check"></i><b>16</b> Slides and Presentations</a>
<ul>
<li class="chapter" data-level="16.1" data-path="slides-and-presentations.html"><a href="slides-and-presentations.html#xaringan-slides"><i class="fa fa-check"></i><b>16.1</b> Xaringan slides</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="flexdashboard.html"><a href="flexdashboard.html"><i class="fa fa-check"></i><b>17</b> Flexdashboard</a>
<ul>
<li class="chapter" data-level="17.1" data-path="flexdashboard.html"><a href="flexdashboard.html#creating-your-first-flexdashboard"><i class="fa fa-check"></i><b>17.1</b> Creating your first flexdashboard</a></li>
<li class="chapter" data-level="17.2" data-path="flexdashboard.html"><a href="flexdashboard.html#sharing-your-dashboard-online"><i class="fa fa-check"></i><b>17.2</b> Sharing your dashboard online</a></li>
<li class="chapter" data-level="17.3" data-path="flexdashboard.html"><a href="flexdashboard.html#deploying-flexdashboard-online"><i class="fa fa-check"></i><b>17.3</b> Deploying flexdashboard online</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="flexdashboard.html"><a href="flexdashboard.html#sharing-via-rstudio-connect-rpubs"><i class="fa fa-check"></i><b>17.3.1</b> Sharing via RStudio Connect / RPubs</a></li>
<li class="chapter" data-level="17.3.2" data-path="flexdashboard.html"><a href="flexdashboard.html#netlify-drag-n-drop"><i class="fa fa-check"></i><b>17.3.2</b> Netlify Drag ‘n’ Drop</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="setting-up-a-kaggle-competition.html"><a href="setting-up-a-kaggle-competition.html"><i class="fa fa-check"></i><b>18</b> Setting up a kaggle competition</a></li>
<li class="chapter" data-level="19" data-path="learning-more-1.html"><a href="learning-more-1.html"><i class="fa fa-check"></i><b>19</b> Learning more</a>
<ul>
<li class="chapter" data-level="19.1" data-path="learning-more-1.html"><a href="learning-more-1.html#statistics-data-science-forecasting"><i class="fa fa-check"></i><b>19.1</b> Statistics / Data Science / Forecasting</a></li>
<li class="chapter" data-level="19.2" data-path="learning-more-1.html"><a href="learning-more-1.html#r-programming"><i class="fa fa-check"></i><b>19.2</b> R Programming</a></li>
<li class="chapter" data-level="19.3" data-path="learning-more-1.html"><a href="learning-more-1.html#other-resources-for-learning-more-about-r"><i class="fa fa-check"></i><b>19.3</b> Other resources for learning more about R</a></li>
<li class="chapter" data-level="19.4" data-path="learning-more-1.html"><a href="learning-more-1.html#keeping-up-with-r"><i class="fa fa-check"></i><b>19.4</b> Keeping up with R</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Resources for learning R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="automated-video-making-with-ari" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">10</span> Automated video making with ari<a href="automated-video-making-with-ari.html#automated-video-making-with-ari" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><strong>A</strong>utomated</p>
<p><strong>R</strong></p>
<p><strong>I</strong>nstructor</p>
<p><a href="https://github.com/jhudsl/ari">Ari is an R package</a> that helps you create slides with automatic audio captions. It is developed at <a href="https://github.com/jhudsl">Johns Hopkins Data Science Lab</a>, and created by <a href="http://seankross.com/">Sean Kross</a>.</p>
<p>Here is an example of the kind of video you can make, by <a href="http://seankross.com/">Sean Kross</a>:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/dcIUu4GCOKU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<div id="getting-setup-with-ari" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Getting setup with ari<a href="automated-video-making-with-ari.html#getting-setup-with-ari" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This is a guide based on <a href="https://github.com/jhudsl/ari">the ari README</a>.</p>
<p>In order to create an ari video, you need to:</p>
<ol style="list-style-type: decimal">
<li>Provide an HTML slide deck such as <a href="https://bookdown.org/yihui/rmarkdown/ioslides-presentation.html"><code>ioslides</code></a> or <a href="https://bookdown.org/yihui/rmarkdown/xaringan.html"><code>xaringan</code></a></li>
<li>Provide some set of subtitles/script for each slide
<ul>
<li>Either in a separate file, or in each slide</li>
</ul></li>
<li>Set up an account with Amazon Web Services for AWS Polly (free, as I understand it)
<ul>
<li>see <a href="http://seankross.com/2017/05/02/Access-Amazon-Web-Services-in-R.html">this guide by Sean Kross</a>, but ensure to select Polly related webservices instead of S3 bucket ones as provided in the post.</li>
</ul></li>
<li>Share your API key with polly (and be sure to NEVER EVER commit this to github)</li>
<li>Have <a href="ffmpeg.org">ffmpeg</a> installed</li>
</ol>
<div id="provide-an-html-slide-deck" class="section level3 hasAnchor" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Provide an HTML slide deck<a href="automated-video-making-with-ari.html#provide-an-html-slide-deck" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You need some kind of HTML slide deck.</p>
<p>One of the easiest ways to create them is to use Rstudio’s guided process:</p>
<p>File &gt; New File &gt; R Markdown &gt; from Template &gt; pick a Xaringan slide deck</p>
<p>Or</p>
<p>File &gt; New File &gt; R Markdown &gt; Presentation &gt; choose ioslides.</p>
<p>For more information see the <a href="https://github.com/numbats/resources/blob/master/slides.Rmd">chapter on slide decks in R</a>.</p>
</div>
<div id="provide-some-set-of-subtitlesscript-for-each-slide" class="section level3 hasAnchor" number="10.1.2">
<h3><span class="header-section-number">10.1.2</span> Provide some set of subtitles/script for each slide<a href="automated-video-making-with-ari.html#provide-some-set-of-subtitlesscript-for-each-slide" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Either in a separate file, or in each slide as an HTML comment.</p>
<p>If you are going the separate file route:</p>
<ul>
<li>A markdown file with each slide separated by a second level header (<code>##</code>) and then your script text. See <code>file.show(ari_example("ari_intro_script.md"))</code> for an example.</li>
<li>An HTML file of slides <code>browseURL(ari_example("ari_intro.html"))</code></li>
</ul>
<p>If you are going the slides as HTML comment route:</p>
<ul>
<li>Have an Rmarkdown file with HTML comments (<code>&lt;!-- this is an HTML comment --&gt;</code>) that denote the script. See <code>file.show(ari_example("ari_comments.Rmd"))</code> for an example.</li>
</ul>
</div>
<div id="set-up-an-account-with-amazon-web-services-for-aws-polly" class="section level3 hasAnchor" number="10.1.3">
<h3><span class="header-section-number">10.1.3</span> Set up an account with Amazon Web Services for AWS Polly<a href="automated-video-making-with-ari.html#set-up-an-account-with-amazon-web-services-for-aws-polly" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is free, as far as I understand it. To get setup, follow <a href="http://seankross.com/2017/05/02/Access-Amazon-Web-Services-in-R.html">this guide by Sean Kross</a>. But ensure to select Polly related webservices instead of S3 bucket ones as provided in the post.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="automated-video-making-with-ari.html#cb10-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;figs/aws-screenshot.png&quot;</span>)</span></code></pre></div>
<p><img src="figs/aws-screenshot.png" /><!-- --></p>
</div>
<div id="share-your-api-key-with-polly" class="section level3 hasAnchor" number="10.1.4">
<h3><span class="header-section-number">10.1.4</span> Share your API key with polly<a href="automated-video-making-with-ari.html#share-your-api-key-with-polly" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To share use polly from within R, you need to set some environment variables.</p>
<p>What even are “Environment Variables”? They are named values that tell some external application some information. In this case, we are telling AWS our KEY ID and ACCESS KEY, and it uses that information to verify who we are. You can think of it like a username and password. They often look something like this:</p>
<pre><code>AWS_ACCESS_KEY_ID=HFepbTd3gnHeL5w3IJFZ
SOME_OTHER_API_KEY=VpewOKpQ5Y4ir48R78n2
YET_ANOTHER_API=olAs4e1OX5qP2cD4Kp4U</code></pre>
<p>This key here refers to an AWS Access Key ID.</p>
<p>This sort of format might sometimes referred to as <code>key-value</code> pairs, the thing on the left is the key, and the thing on the right is that key’s value. E.g., <code>name: Nick</code> - the key is “name”, and it’s value is “Nick”).</p>
<p>You can read more on Environment Variables at this <a href="https://medium.com/chingu/an-introduction-to-environment-variables-and-how-to-use-them-f602f66d15fa">medium post</a> and on <a href="https://en.wikipedia.org/wiki/Environment_variable">wikipedia (yes, they are that important that they get their own wiki page!)</a>. You can also learn more about how R uses this (and what R does when it boots up) by looking at the helpfile for <code>Startup</code> - <code>?Startup</code>.</p>
<div id="approach-one-use-sys.setenv" class="section level4 hasAnchor" number="10.1.4.1">
<h4><span class="header-section-number">10.1.4.1</span> Approach one, use <code>Sys.setenv</code><a href="automated-video-making-with-ari.html#approach-one-use-sys.setenv" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first is to set the environment variable each time you use <code>ari</code>. To do this, you use <code>Sys.setenv</code>, like so each time you use <code>ari</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="automated-video-making-with-ari.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First set up your AWS keys</span></span>
<span id="cb12-2"><a href="automated-video-making-with-ari.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (note this is fake API data)</span></span>
<span id="cb12-3"><a href="automated-video-making-with-ari.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="st">&quot;AWS_ACCESS_KEY_ID&quot;</span> <span class="ot">=</span> <span class="st">&quot;EA6TDV7ASDE9TL2WI6RJ&quot;</span>,</span>
<span id="cb12-4"><a href="automated-video-making-with-ari.html#cb12-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;AWS_SECRET_ACCESS_KEY&quot;</span> <span class="ot">=</span> <span class="st">&quot;OSnwITbMzcAwvHfYDEmk10khb3g82j04Wj8Va4AA&quot;</span>,</span>
<span id="cb12-5"><a href="automated-video-making-with-ari.html#cb12-5" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;AWS_DEFAULT_REGION&quot;</span> <span class="ot">=</span> <span class="st">&quot;us-east-2&quot;</span>)</span>
<span id="cb12-6"><a href="automated-video-making-with-ari.html#cb12-6" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb12-7"><a href="automated-video-making-with-ari.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a video from a Markdown file and slides</span></span>
<span id="cb12-8"><a href="automated-video-making-with-ari.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ari_narrate</span>(</span>
<span id="cb12-9"><a href="automated-video-making-with-ari.html#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ari_example</span>(<span class="st">&quot;ari_intro_script.md&quot;</span>),</span>
<span id="cb12-10"><a href="automated-video-making-with-ari.html#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ari_example</span>(<span class="st">&quot;ari_intro.html&quot;</span>),</span>
<span id="cb12-11"><a href="automated-video-making-with-ari.html#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">voice =</span> <span class="st">&quot;Joey&quot;</span></span>
<span id="cb12-12"><a href="automated-video-making-with-ari.html#cb12-12" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Using <code>Sys.setenv</code> will work for each R session. So, if you restart R, you will need to run the <code>Sys.setenv</code> code each time. I prefer to avoid that, since it means I need to record that information somewhere on my computer, which creates extra work each time. To avoid that, I use <code>.Renviron</code> approach described below.</p>
</div>
<div id="approach-two-use-.renviron" class="section level4 hasAnchor" number="10.1.4.2">
<h4><span class="header-section-number">10.1.4.2</span> Approach two: use <code>.Renviron</code><a href="automated-video-making-with-ari.html#approach-two-use-.renviron" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Another approach is to save these in your personal R evironment - your <code>.Renviron</code> file. This is a special file that you can store these environmental keys. The way this works is that when R starts up, it searches for a <code>.Renviron</code> file (located at <code>fs::path_home()</code>, or within the current folder) and then loads the environment variables there.</p>
<p>This all felt a bit mysterious to me the first couple of times I used it - but this process is made simpler with <code>usethis::edit_r_environ()</code></p>
<p>This opens up the <code>.Renviron</code> file, and tells you to restart R for changes to take effect:</p>
<pre><code>&gt; usethis::edit_r_environ()
● Modify &#39;/Users/ntie0001/.Renviron&#39;
● Restart R for changes to take effect</code></pre>
<p>So you would edit the file and place something like the following in it:</p>
<pre><code>AWS_ACCESS_KEY_ID=eim417O8HbM0A21g4uv8
AWS_SECRET_ACCESS_KEY=svIr03835X5tdndEw7c5CRaAOYbSj04rA2p302il
AWS_DEFAULT_REGION=ap-southeast-2</code></pre>
<p>Then, follow the instructions from usethis, and</p>
<ol style="list-style-type: decimal">
<li>Close the opened “.Renviron” file.</li>
<li>Restart R</li>
</ol>
</div>
<div id="a-cautionary-note-on-sharing-keys." class="section level4 hasAnchor" number="10.1.4.3">
<h4><span class="header-section-number">10.1.4.3</span> A cautionary note on sharing keys.<a href="automated-video-making-with-ari.html#a-cautionary-note-on-sharing-keys." class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Remember to NEVER EVER commit files containing keys to github. If you notice that you have, you should immediately delete these keys from AWS (or wherever the keys are from), which prevents them from further use.</p>
<p>This is important because if someone gets a hold of these keys, the can potentially rack up many hours of time on AWS servers, which in turn could cost you serious <code>$$$</code>. There are bots that trawl through github looking for tokens like this, so it is not so much a case of if this will happen, but <strong>when</strong>.</p>
</div>
</div>
<div id="have-ffmpeg-installed" class="section level3 hasAnchor" number="10.1.5">
<h3><span class="header-section-number">10.1.5</span> Have <a href="https://ffmpeg.org/">ffmpeg</a> installed<a href="automated-video-making-with-ari.html#have-ffmpeg-installed" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>ffmpeg</code> is “A complete, cross-platform solution to record, convert and stream audio and video.”</p>
<p>You can download it <a href="https://ffmpeg.org/download.html">here</a>.</p>
<p>You can check if <code>ffmpeg</code> is installed with</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="automated-video-making-with-ari.html#cb15-1" aria-hidden="true" tabindex="-1"></a>ari<span class="sc">::</span><span class="fu">ffmpeg_version</span>()</span></code></pre></div>
</div>
<div id="narrate-the-video" class="section level3 hasAnchor" number="10.1.6">
<h3><span class="header-section-number">10.1.6</span> Narrate the video<a href="automated-video-making-with-ari.html#narrate-the-video" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can create a video with <code>ari_narrate()</code>.</p>
<p>For the following directory structure:</p>
<pre><code>ari/
   - ari-example.Rmd
   - ari-example.html</code></pre>
<p>You would call the following:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="automated-video-making-with-ari.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ari_narrate</span>(<span class="at">script =</span> <span class="st">&quot;ari/ari-example.Rmd&quot;</span>,</span>
<span id="cb17-2"><a href="automated-video-making-with-ari.html#cb17-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">slides =</span> <span class="st">&quot;ari/ari-example.html&quot;</span>,</span>
<span id="cb17-3"><a href="automated-video-making-with-ari.html#cb17-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">output =</span> <span class="st">&quot;ari/ari-video-nicole.mp4&quot;</span>,</span>
<span id="cb17-4"><a href="automated-video-making-with-ari.html#cb17-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">voice =</span> <span class="st">&quot;Nicole&quot;</span>,</span>
<span id="cb17-5"><a href="automated-video-making-with-ari.html#cb17-5" aria-hidden="true" tabindex="-1"></a>            <span class="co"># voice = &quot;Russell&quot;,</span></span>
<span id="cb17-6"><a href="automated-video-making-with-ari.html#cb17-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">subtitles =</span> <span class="cn">TRUE</span>,</span>
<span id="cb17-7"><a href="automated-video-making-with-ari.html#cb17-7" aria-hidden="true" tabindex="-1"></a>            <span class="co"># this needs to be &quot;iterative&quot; or it won&#39;t advance the slides</span></span>
<span id="cb17-8"><a href="automated-video-making-with-ari.html#cb17-8" aria-hidden="true" tabindex="-1"></a>            <span class="co"># also each slide needs to have a script or the video will be out</span></span>
<span id="cb17-9"><a href="automated-video-making-with-ari.html#cb17-9" aria-hidden="true" tabindex="-1"></a>            <span class="co"># of sync. Including the title slide!</span></span>
<span id="cb17-10"><a href="automated-video-making-with-ari.html#cb17-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">capture_method =</span> <span class="st">&quot;iterative&quot;</span>)</span></code></pre></div>
<p>This would then create:</p>
<pre><code>ari/
   - ari-example.Rmd
   - ari-example.html
   - ari-video-nicole.mp4
   - ari-video-nicole.srt</code></pre>
<p>You can see an example of the ari slides in “ari-example.Rmd” and “ari-run.R” <a href="https://github.com/numbats/resources/tree/master/ari" class="uri">https://github.com/numbats/resources/tree/master/ari</a> of this GitHub directory.</p>
</div>
</div>
<div id="helper-function-for-ari" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Helper function for <code>ari</code><a href="automated-video-making-with-ari.html#helper-function-for-ari" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Below is a helper function for <code>ari</code> if you just want to provide a single Rmarkdown file and not specify the HTML as well:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="automated-video-making-with-ari.html#cb19-1" aria-hidden="true" tabindex="-1"></a>ari_narrate_auto <span class="ot">&lt;-</span> <span class="cf">function</span>(slides, <span class="at">render =</span> <span class="cn">TRUE</span>, <span class="at">voice =</span> <span class="st">&quot;Nicole&quot;</span>){</span>
<span id="cb19-2"><a href="automated-video-making-with-ari.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-3"><a href="automated-video-making-with-ari.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (render) {</span>
<span id="cb19-4"><a href="automated-video-making-with-ari.html#cb19-4" aria-hidden="true" tabindex="-1"></a>    rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="at">input =</span> slides)</span>
<span id="cb19-5"><a href="automated-video-making-with-ari.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb19-6"><a href="automated-video-making-with-ari.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-7"><a href="automated-video-making-with-ari.html#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ari_narrate</span>(<span class="at">script =</span> slides,</span>
<span id="cb19-8"><a href="automated-video-making-with-ari.html#cb19-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">slides =</span> xfun<span class="sc">::</span><span class="fu">with_ext</span>(slides, <span class="st">&quot;html&quot;</span>),</span>
<span id="cb19-9"><a href="automated-video-making-with-ari.html#cb19-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">output =</span>xfun<span class="sc">::</span><span class="fu">with_ext</span>(slides, <span class="st">&quot;mp4&quot;</span>),</span>
<span id="cb19-10"><a href="automated-video-making-with-ari.html#cb19-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">voice =</span> voice,</span>
<span id="cb19-11"><a href="automated-video-making-with-ari.html#cb19-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">subtitles =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-12"><a href="automated-video-making-with-ari.html#cb19-12" aria-hidden="true" tabindex="-1"></a>              <span class="co"># this needs to be &quot;iterative&quot; or it won&#39;t advance the slides</span></span>
<span id="cb19-13"><a href="automated-video-making-with-ari.html#cb19-13" aria-hidden="true" tabindex="-1"></a>              <span class="co"># also each slide needs to have a script or the video will be out</span></span>
<span id="cb19-14"><a href="automated-video-making-with-ari.html#cb19-14" aria-hidden="true" tabindex="-1"></a>              <span class="co"># of sync. Including the title slide!</span></span>
<span id="cb19-15"><a href="automated-video-making-with-ari.html#cb19-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">capture_method =</span> <span class="st">&quot;iterative&quot;</span>)</span>
<span id="cb19-16"><a href="automated-video-making-with-ari.html#cb19-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Example usage - point it at an Rmd file:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="automated-video-making-with-ari.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ari_narrate_auto</span>(<span class="st">&quot;ari/ari-example.Rmd&quot;</span>) </span></code></pre></div>
</div>
<div id="troubleshooting-ari" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Troubleshooting <code>ari</code><a href="automated-video-making-with-ari.html#troubleshooting-ari" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Video is crated, but just shows the first slide.</p>
<ul>
<li>Ensure <code>capture_method = "iterative"</code></li>
</ul>
<p>Slides skip / don’t align with script</p>
<ul>
<li>Ensure all slides have a script file, and only one script in HTML comments per slide</li>
</ul>
<p>Warning message like:</p>
<pre><code>Warning messages:
1: In pollyHTTP(action = &quot;voices&quot;, verb = &quot;GET&quot;, query = query, ...) :
  Forbidden (HTTP 403).
2: In structure(out[[&quot;Voices&quot;]], NextToken = out[[&quot;NextToken&quot;]]) :
  Calling &#39;structure(NULL, *)&#39; is deprecated, as NULL cannot have attributes.
  Consider &#39;structure(list(), *)&#39; instead.</code></pre>
<ul>
<li>Check that your AWS keys are still valid</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="spatial-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="using-.rprofile-and-.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/numbats/resources/edit/master/ari.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Resources.pdf", "Resources.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
